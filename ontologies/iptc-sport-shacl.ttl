@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:     <http://www.w3.org/2002/07/owl#> .
@prefix xsd:     <http://www.w3.org/2001/XMLSchema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix sh:      <http://www.w3.org/ns/shacl#> .
@prefix sport:   <https://sportschema.org/ontologies/main/> .
@prefix spact:   <https://sportschema.org/ontologies/main/> .

##### SHACL Shapes for validating Sports RDF data #####

sport:ActionShape
  a sh:NodeShape ;
  sh:targetClass sport:Action ;
  sh:closed true;
  sh:ignoredProperties ( rdf:type rdfs:label ) ;
  sh:property [
    sh:path sport:participation ;
    sh:class sport:Participation ;
  ] ;
  sh:property [
    sh:path sport:actionInEvent ;
    sh:class sport:Event
  ] ;
  sh:property [
    sh:path sport:actionDateTime ;
    sh:datatype xsd:dateTime
  ] ;
  sh:property [
    sh:path sport:actionType ;
    sh:pattern "^http://cv.iptc.org/newscodes/sp" ;
    sh:nodeKind sh:IRI ;
    sh:flags   "i"  # Ignore case
  ] ;
  sh:property [
    sh:path sport:angle ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:bodyPart ;
    sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path spact:class ;
    sh:nodeKind sh:IRI ;
    sh:pattern "^http://cv.iptc.org/newscodes/spactionclass/" ;
    sh:flags   "i"  # Ignore case
  ] ;
  sh:property [
    sh:path sport:comment ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:distance ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:endLocation ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:fieldLocation ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:goalLocation ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:lastModified ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:minutesElapsed ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:oppositePlay ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:passDescription ;
    sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:passMethod ;
    sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:passType ;
    sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:penaltyLevel ;
    sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:penaltyType ;
    sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:periodValue ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:recipientType ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:result ;
    sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:role ;
    sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:saveMethod ;
    sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:saveType ;
    sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:scoreAttemptDescription ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:scoreAttemptResult ;
    sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:scoreAttemptSide ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:scoreAttemptSituation ;
    sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:scoreAttemptType ;
    sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:sequenceNumber ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:shotDistance ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:shotDistanceUnits ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:shotType ;
    sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:startLocation ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:substitutionReason ;
    sh:datatype xsd:string
    # sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:timeAddition ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:timeAddition ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:timeElapsed ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:timeRemaining ;
    sh:datatype xsd:string
  ] ;
  sh:property [
    sh:path sport:zone ;
    sh:nodeKind sh:IRI ;
  ] .

sport:AssociateShape
  a sh:NodeShape ;
  sh:targetClass sport:Associate ;
  sh:closed true;
  sh:ignoredProperties ( rdf:type rdfs:label ) .

sport:CompetitionShape
  a sh:NodeShape ;
  sh:targetClass sport:Competition ;
  sh:closed true;
  sh:ignoredProperties ( rdf:type rdfs:label ) ;
  sh:property [
    sh:path sport:sport ;
    sh:pattern "^http://cv.iptc.org/newscodes/mediatopic/" ;
    sh:flags   "i"  # Ignore case
  ] ;
  sh:property [
    sh:path sport:competitionType ;
    sh:pattern "^http://cv.iptc.org/newscodes/spct/" ;
    sh:flags   "i"  # Ignore case
  ] ;
  sh:property [
    sh:path sport:parent ;
    sh:class sport:Competition
  ] ;
  sh:property [
    sh:path sport:participation ;
    sh:class sport:Participation
  ] ;
  sh:property [
    sh:path sport:containsCompetitionPhase ;
    sh:class sport:CompetitionPhase
  ] ;
  sh:property [
    sh:path sport:containsEvent ;
    sh:class sport:Event
  ] ;
  sh:property [
    sh:path sport:governedBy ;
    sh:class sport:GoverningBody
  ] .

sport:CompetitionPhaseShape
  a sh:NodeShape ;
  sh:targetClass sport:CompetitionPhase ;
  sh:closed true;
  sh:ignoredProperties ( rdf:type rdfs:label ) ;
  sh:property [
    sh:path sport:sport ;
    sh:pattern "^http://cv.iptc.org/newscodes/mediatopic/" ;
    sh:flags   "i"  # Ignore case
  ] ;
  sh:property [
    sh:path sport:phaseParticipation ;
    sh:class sport:Participation
  ] ;
  sh:property [
    sh:path sport:competitionFormat ;
    sh:pattern "^http://cv.iptc.org/newscodes/sptournamentform/" ;
    sh:flags   "i"  # Ignore case
  ] ;
  sh:property [
    sh:path sport:parent ;
    sh:class sport:CompetitionPhase ;
  ] ;
  sh:property [
    sh:path sport:competitionPhaseType ;
    sh:pattern "^http://cv.iptc.org/newscodes/sptournamentphase/" ;
    sh:flags   "i"  # Ignore case
  ] ;
  sh:property [
    sh:path sport:phaseInCompetition ;
    sh:class sport:Competition
  ] .

sport:EventShape rdf:type sh:NodeShape ;
  sh:targetClass sport:Event ;
  sh:closed true ;
  sh:ignoredProperties ( rdf:type rdfs:label ) ;
  sh:property [
    sh:path sport:participation ;
    sh:class sport:Participation ;
  ] ;
  sh:property [
    sh:path sport:location ;
    sh:class sport:Site ;
    sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:eventInCompetition ;
    sh:class sport:Competition ;
    sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:eventInCompetitionPhase ;
    sh:class sport:CompetitionPhase ;
    sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:eventParticipation ;
    sh:class sport:Participation ;
    # sh:nodeKind sh:IRI ;
  ] ;
  sh:property [
    sh:path sport:attendance ;
    sh:datatype xsd:string ;
    # sh:datatype xsd:integer ;
  ] ;
  sh:property [
    sh:path sport:startDateTime ;
    sh:datatype xsd:dateTime ;
  ] ;
  sh:property [
    sh:path sport:endDateTime ;
    sh:datatype xsd:dateTime ;
  ] ;
  sh:property [
    sh:path sport:sport ;
    sh:pattern "^http://cv.iptc.org/newscodes/mediatopic/" ;     # term is from CV
    sh:flags   "i"                                               # Ignore case
  ] ;
  sh:property [
    sh:path sport:eventOutcomeType ;
    sh:pattern "^http://cv.iptc.org/newscodes/speventoutcometype/" ; # term is from CV
    sh:flags   "i"                                               # Ignore case
  ] ;
  sh:property [
    sh:path sport:eventStatus ;
    sh:pattern "^http://cv.iptc.org/newscodes/speventstatus/" ;  # term is from CV
    sh:flags   "i"                                               # Ignore case
  ] ;
  sh:property [
    sh:path sport:subEvent ;
    sh:class sport:Event
  ] .

#sport:ParticipatableThingShape
#  sh:targetClass sport:ParticipatableThing ;
#  sh:closed true ;
#  sh:ignoredProperties ( rdf:type rdfs:label ) ;
#  sh:property [
#    sh:path sport:sport ;
#    sh:pattern "^http://cv.iptc.org/newscodes/mediatopic/" ;
#    sh:flags   "i"  # Ignore case
#  ] ;
#  sh:property [
#    sh:path sport:parent ;
#    sh:class sport:ParticipatableThing
#  ] .

sport:ParticipationShape
  sh:targetClass sport:TeamParticipation, sport:IndividualParticipation, sport:AssociateParticipation, sport:OfficialParticipation ;
  a sh:NodeShape ;
  sh:property [
    sh:path sport:scoreUnits ;
    sh:pattern "^http://cv.iptc.org/newscodes/spscoreunits/" ;  # term is from CV
    sh:flags   "i"                                              # Ignore case
  ] ;
  sh:property [
    sh:path sport:eventOutcome ;
    sh:pattern "^http://cv.iptc.org/newscodes/speventoutcome/" ; # term is from CV
    sh:flags   "i"                                               # Ignore case
  ] ;
  sh:property [
    sh:path sport:positionEvent ;
    sh:pattern "^http://cv.iptc.org/newscodes/(spsocposition|spsocascpos|vendoffpos)/" ;
    sh:flags   "i"                                               # Ignore case
  ] .

sport:IndividualMembershipShape
  sh:targetClass sport:IndividualMembership ;
  a sh:NodeShape ;
  sh:property [
    sh:path sport:positionRegular ;
    # we really should check for individual vocabularies...
    # sh:pattern "^http://cv.iptc.org/newscodes/(spsocposition|spsocascpos)/" ;
    # but some example data fails (needs to be fixed) so let's cheat for now
    sh:pattern "^http://cv.iptc.org/newscodes/" ;
    sh:flags   "i"                                               # Ignore case
  ] .
